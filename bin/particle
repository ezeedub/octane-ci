#!/usr/bin/env bash
# Scaffold the Octane-based project.
# This script runs within the Build container, so all tools are available.
#: exec_target = cli

# Init the tools like npm within the cli container
source ~/.profile

# Only download particle theme if it doesn't already exist.
# Can't just check for ${THEME_PATH} since node_modules might be cached.
if [ ! -e ${THEME_PATH} ]; then
  printf "$INFO_SLUG Installing Particle...\n"
  # Install latest Particle theme
  npx phase2/create-particle ${THEME_PATH}
  # @TODO: Remove this once Particle removes Husky.
  # Need to remove the default git hooks added by Husky from Particle.
  # They interfere with project hooks and with Drupal config import/export.
  rm -rf .git/hooks
fi
